<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyScript Hello World</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <!-- link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script defer src="https://pyscript.net/latest/pyscript.js"></script -->
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
</head>
<body>

    <h1>Welcome to PyScript</h1>

    <button id="helloBtn">Click Me</button>
    <button id="genaiBtn">GenAI Button</button>

    <dev id="output" markdown="1"></dev>
    <script type="py" config="pyscript.toml">
        from pygenaiapi import print_hello        
        from pygenaiapi import ask_llm
        from dotenv import load_dotenv
        import js
        import os
        from os.path import join, dirname
        
        js.document.getElementById("helloBtn").onclick = print_hello
        js.document.getElementById("genaiBtn").onclick = ask_llm    
        os.environ["NEW"] = "NEW"
        dotenv_path =join(os.getcwd(),'/.env')
        print(dotenv_path)
        load_dotenv(dotenv_path)
        print(os.environ)
        print(os.getenv("TEST"))
        print( join(dirname("__file__")," is file path."))
        print( join(os.path.abspath("__file__")," is file path."))
        print( join(os.path.realpath("__file__")," is file path."))
        print(os.getcwd())
        import sys
        import inspect
        
        print("Python " + sys.version)
        print("__file__")                                        # main.py
        print(sys.argv[0])                                     # main.py
        print(inspect.stack()[0][1])                           # lib/bar.py
        print(sys.path[0])                                     # C:\filepaths
        
        print(os.path.realpath("__file__"))                      # C:\filepaths\main.py
        print(os.path.abspath("__file__"))                       # C:\filepaths\main.py
        print(os.path.basename("__file__"))                      # main.py
        print(os.path.basename(os.path.realpath(sys.argv[0]))) # main.py
                
        print(sys.path[0])                                     # C:\filepaths
        print(os.path.abspath(os.path.split(sys.argv[0])[0]))  # C:\filepaths
        print(os.path.dirname(os.path.abspath("__file__")))      # C:\filepaths
        print( os.path.dirname(os.path.realpath(sys.argv[0])))  # C:\filepaths
        print( os.path.dirname("__file__"))                       # (empty string)
                
        print(inspect.getfile(inspect.currentframe()))         # lib/bar.py
        
        print(os.path.abspath(inspect.getfile(inspect.currentframe()))) # C:\filepaths\lib\bar.py
        print(os.path.dirname(os.path.abspath(inspect.getfile(inspect.currentframe())))) # C:\filepaths\lib
        
        print(os.path.abspath(inspect.stack()[0][1]))          # C:\filepaths\lib\bar.py
        print(os.path.dirname(os.path.abspath(inspect.stack()[0][1])))  # C:\filepaths\lib
        
        
    </script>
</body>
</html>
